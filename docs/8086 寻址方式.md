# 8086 寻址方式

8086 支持多种寻址方式，可分为 **数据寻址** 和 **指令寻址** 两大类。这里主要讨论操作数的数据寻址方式：

---

## 📌 一、**立即寻址（Immediate Addressing）**

操作数直接包含在指令中。

```assembly
MOV AX, 1234h    ; 立即数 1234h → AX
MOV AL, 5        ; 立即数 5 → AL
```

- 操作数在指令机器码中
- 只能用于源操作数

---

## 📌 二、**寄存器寻址（Register Addressing）**

操作数在寄存器中。

```assembly
MOV AX, BX       ; BX → AX
ADD CX, DX
```

- 执行速度快（无需访存）
- 源和目的都可以是寄存器

---

## 📌 三、**直接寻址（Direct Addressing）**

偏移地址直接写在指令中。

```assembly
MOV AX, [1234h]  ; 将 DS:1234h 处的字 → AX
MOV AL, [100h]   ; 将 DS:0100h 处的字节 → AL
```

- 偏移地址是 16 位立即数
- 默认段寄存器通常是 **DS**

---

## 📌 四、**寄存器间接寻址（Register Indirect Addressing）**

偏移地址在寄存器中（BX、BP、SI、DI）。

```assembly
MOV AX, [BX]     ; DS:[BX] → AX
MOV CX, [SI]     ; DS:[SI] → CX
MOV DX, [BP]     ; SS:[BP] → DX  (默认段为 SS!)
```

- 允许的寄存器：**BX、BP、SI、DI**
- BP 默认使用 **SS**，其余默认使用 **DS**

---

## 📌 五、**基址寻址（Based Addressing）**

偏移地址 = 基址寄存器（BX 或 BP）+ 8/16 位位移。

```assembly
MOV AX, [BX+10h]   ; DS:[BX+10h] → AX
MOV CX, [BP-4]     ; SS:[BP-4] → CX
```

- 基址寄存器：**BX（DS）、BP（SS）**
- 位移可以是 8 位或 16 位有符号数

---

## 📌 六、**变址寻址（Indexed Addressing）**

偏移地址 = 变址寄存器（SI 或 DI）+ 8/16 位位移。

```assembly
MOV AX, [SI+20h]   ; DS:[SI+20h] → AX
MOV BX, [DI-2]     ; DS:[DI-2] → BX
```

- 变址寄存器：**SI、DI**
- 常用于数组访问

---

## 📌 七、**基址变址寻址（Based Indexed Addressing）**

偏移地址 = 基址寄存器 + 变址寄存器 + 位移。

```assembly
MOV AX, [BX+SI]        ; DS:[BX+SI] → AX
MOV DX, [BP+DI+10h]    ; SS:[BP+DI+10h] → DX
```

- 基址：BX/BP
- 变址：SI/DI
- 可加 8/16 位位移（可选）
- 强大，适合二维数组、结构体

---

## 📌 八、**隐含寻址（Implied Addressing）**

操作数隐含在指令中，不显式写出。

```assembly
AAA         ; 调整 AL 中的 ASCII 加法结果（隐含 AL）
MUL BL      ; AX = AL × BL（隐含 AX）
STOSB       ; ES:[DI] ← AL，并 DI++（隐含 AL、ES:DI）
```

- 操作数固定，无需编码

---

## 📌 九、**端口寻址（Port Addressing）**

用于 IN/OUT 指令访问 I/O 端口。

```assembly
IN AL, 60h      ; 从端口 60h 读字节到 AL
OUT 20h, AL     ; 将 AL 写入端口 20h
```

- 端口号可以是 8 位立即数（0-255）或 DX 中的 16 位数

---

## 📊 **寻址方式总结表**

| 寻址方式   | 示例                | 偏移地址计算 | 默认段         |
| ---------- | ------------------- | ------------ | -------------- |
| 立即寻址   | `MOV AX, 5`         | 无           | 无             |
| 寄存器寻址 | `MOV AX, BX`        | 无           | 无             |
| 直接寻址   | `MOV AX, [100h]`    | 100h         | DS             |
| 寄存器间接 | `MOV AX, [BX]`      | BX           | DS（BP 用 SS） |
| 基址寻址   | `MOV AX, [BX+4]`    | BX+4         | DS             |
| 变址寻址   | `MOV AX, [SI+10h]`  | SI+10h       | DS             |
| 基址变址   | `MOV AX, [BX+SI+2]` | BX+SI+2      | DS（BP 用 SS） |
| 隐含寻址   | `MUL BL`            | 无           | 无             |
| 端口寻址   | `IN AL, 80h`        | 无           | 无             |

---

## 🧠 **重要说明**

1. **段覆盖前缀**：可以用 `CS:`、`DS:`、`ES:`、`SS:` 显式指定段

   ```assembly
   MOV AX, ES:[BX]   ; 使用 ES 而非默认 DS
   ```

2. **有效地址（EA）**：上述寻址方式计算出的偏移地址称为有效地址（16 位）

3. **物理地址**：物理地址 = 段寄存器左移 4 位 + 有效地址（20 位结果）

这些寻址方式构成了 8086 灵活的内存访问能力，也是理解 x86 汇编的基础。
