# MASM 常用伪指令汇总

本文整理了 MASM 汇编器常用伪指令，按功能分类，方便学习和查阅。MASM 指令和 NASM 略有不同，尤其在段、数据定义和宏的语法上。

---

## 一、数据定义伪指令

| 伪指令  | 功能说明         | 示例                         | 备注                 |
| ------- | ---------------- | ---------------------------- | -------------------- |
| `DB`    | 定义 8 位数据    | `msg DB 'HELLO',0`           | 零结尾字符串常用     |
| `DW`    | 定义 16 位数据   | `val DW 1234h`               | 可存数字或指针       |
| `DD`    | 定义 32 位数据   | `dword DD 12345678h`         | 32 位程序用          |
| `DQ`    | 定义 64 位数据   | `qword DQ 1234567890ABCDEFh` | x86-64 用            |
| `DT`    | 定义 80 位浮点数 | `flt DT 0.0`                 | x87 浮点用           |
| `EQU`   | 定义常量         | `MAX EQU 80`                 | 文本替换，不分配内存 |
| `CONST` | 定义常量         | `CONST PI=3.1416`            | 可用于计算或表达式   |

---

## 二、空间保留伪指令

| 伪指令 | 功能说明       | 示例                  | 备注                        |
| ------ | -------------- | --------------------- | --------------------------- |
| `DUP`  | 重复初始化数据 | `buffer DB 64 DUP(0)` | 创建 64 字节初值为 0 的数组 |
| `RESB` | 保留字节空间   | `buffer RESB 64`      | 不初始化内存                |
| `RESW` | 保留字空间     | `array RESW 10`       | 10 个 16 位单元             |
| `RESD` | 保留双字空间   | `table RESD 5`        | 5 个 32 位单元              |
| `RESQ` | 保留四字空间   | `data RESQ 2`         | x86-64 用                   |

---

## 三、程序结构伪指令

| 伪指令    | 功能说明               | 示例                      | 备注                        |
| --------- | ---------------------- | ------------------------- | --------------------------- |
| `ASSUME`  | 告诉汇编器寄存器对应段 | `ASSUME CS:CODE, DS:DATA` | 必须在段操作前声明          |
| `SEGMENT` | 定义段                 | `DATA SEGMENT`            | 常用段名：CODE, DATA, STACK |
| `ENDS`    | 段结束                 | `DATA ENDS`               | 与 SEGMENT 配对             |
| `END`     | 程序结束               | `END START`               | 指明程序入口标签            |
| `PROC`    | 定义过程（函数）       | `PRINT PROC`              | 可选参数和近/远调用         |
| `ENDP`    | 过程结束               | `PRINT ENDP`              | 与 PROC 配对                |
| `INCLUDE` | 包含其他文件           | `INCLUDE MACROS.INC`      | 引入宏或常量                |
| `EXTERN`  | 外部符号声明           | `EXTERN printf:NEAR`      | 调用外部函数                |
| `PUBLIC`  | 导出符号               | `PUBLIC _start`           | 其他模块可引用              |

---

## 四、宏和条件汇编伪指令

| 伪指令              | 功能说明     | 示例             | 备注                               |
| ------------------- | ------------ | ---------------- | ---------------------------------- |
| `MACRO`             | 定义宏       | `PRINT MACRO ch` | 与 ENDM 配对                       |
| `ENDM`              | 宏结束       | `ENDM`           | 与 MACRO 配对                      |
| `IF / ELSE / ENDIF` | 条件汇编     | `IF DEBUG`       | 编译时生成条件代码                 |
| `REPT`              | 重复生成代码 | `REPT 10`        | 循环生成相同指令，配合 `ENDM` 使用 |

---

## 五、其他常用伪指令

| 伪指令       | 功能说明 | 示例                    | 备注                             |
| ------------ | -------- | ----------------------- | -------------------------------- |
| `TITLE`      | 程序标题 | `TITLE MyProgram`       | 在 MASM IDE 中显示               |
| `NAME`       | 程序名   | `NAME demo`             | 可用于生成模块名                 |
| `OPTION`     | 编译选项 | `OPTION CASEMAP:NONE`   | 控制大小写敏感等                 |
| `INCLUDELIB` | 链接库   | `INCLUDELIB msvcrt.lib` | 用于链接库文件                   |
| `NOP`        | 空操作   | `NOP`                   | 汇编器生成机器码 NOP，占位或延时 |

---

> 注：MASM 伪指令控制汇编器行为，用于定义数据、段、宏、条件编译和程序结构，不会直接生成 CPU 指令。
