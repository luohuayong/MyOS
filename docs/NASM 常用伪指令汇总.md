# NASM 常用伪指令汇总

本文整理了 NASM 汇编器常用伪指令，按功能分类，方便学习和查阅。

---

## 一、数据定义伪指令

| 伪指令 | 功能说明                      | 示例                         | 备注                 |
| ------ | ----------------------------- | ---------------------------- | -------------------- |
| `DB`   | 定义 8 位数据（Byte）         | `msg DB 'HELLO',0`           | 零结尾字符串常用     |
| `DW`   | 定义 16 位数据（Word）        | `val DW 1234h`               | 可存数字或指针       |
| `DD`   | 定义 32 位数据（Double Word） | `dword DD 12345678h`         | 32 位程序用          |
| `DQ`   | 定义 64 位数据（Quad Word）   | `qword DQ 1234567890ABCDEFh` | x86-64 用            |
| `DT`   | 定义 80 位浮点数              | `flt DT 0.0`                 | x87 浮点用           |
| `EQU`  | 定义常量                      | `MAX EQU 80`                 | 文本替换，不分配内存 |

---

## 二、空间保留伪指令

| 伪指令 | 功能说明     | 示例             | 备注            |
| ------ | ------------ | ---------------- | --------------- |
| `RESB` | 保留字节空间 | `buffer RESB 64` | 不初始化内存    |
| `RESW` | 保留字空间   | `array RESW 10`  | 10 个 16 位单元 |
| `RESD` | 保留双字空间 | `table RESD 5`   | 5 个 32 位单元  |
| `RESQ` | 保留四字空间 | `data RESQ 2`    | x86-64 用       |

---

## 三、程序结构伪指令

| 伪指令    | 功能说明              | 示例            | 备注                         |
| --------- | --------------------- | --------------- | ---------------------------- |
| `ORG`     | 设置代码/数据起始地址 | `ORG 100h`      | DOS COM 程序入口通常为 100h  |
| `SECTION` | 定义段                | `SECTION .data` | 常用段名：.text, .data, .bss |
| `SEGMENT` | 与 SECTION 类似       | `SEGMENT data`  | 兼容 MASM，可替代 SECTION    |
| `GLOBAL`  | 导出符号              | `GLOBAL _start` | 符号对链接器可见             |
| `EXTERN`  | 引用外部符号          | `EXTERN printf` | 调用库函数                   |
| `ALIGN`   | 对齐                  | `ALIGN 4`       | 地址对齐到 4 的倍数          |

---

## 四、宏和条件汇编伪指令

| 伪指令                 | 功能说明     | 示例                    | 备注                       |
| ---------------------- | ------------ | ----------------------- | -------------------------- |
| `%MACRO`               | 定义宏       | `%MACRO PRINT_CHAR 1`   | 配合 `%ENDMACRO` 使用      |
| `%ENDMACRO`            | 宏结束       | `%ENDMACRO`             | 与 `%MACRO` 配对           |
| `%INCLUDE`             | 包含其他文件 | `%INCLUDE 'myfile.inc'` | 可引用宏或常量             |
| `%IF / %ELSE / %ENDIF` | 条件汇编     | `%IF DEBUG`             | 编译时控制，按条件生成代码 |

---

## 五、其他常用伪指令

| 伪指令  | 功能说明        | 示例            | 备注                                   |
| ------- | --------------- | --------------- | -------------------------------------- |
| `NOP`   | 空操作          | `NOP`           | 汇编器生成机器码 NOP，可用于占位或延时 |
| `TIMES` | 重复指令 / 数据 | `TIMES 10 DB 0` | 初始化表或缓冲区常用                   |

---

> 注：伪指令并非 CPU 执行指令，而是由汇编器处理，用于生成代码、分配数据、控制段和宏等结构。
